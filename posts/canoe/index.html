<!doctype html><html><head><title>CANoe</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=icon type=image/png href=/images/site/favicon_huc1eb155f918f3b6b0f4ee18df88cff65_18120_42x0_resize_box_3.png><meta property="og:title" content="CANoe"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://GaoSHF.github.io/posts/canoe/"><link rel=stylesheet href=/css/layouts/list.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu846ad9ac893a6e5b96062b389f72ccce_54727_42x0_resize_box_3.png alt=Logo>
Gao's Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/main-logo_hu846ad9ac893a6e5b96062b389f72ccce_54727_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_huc1eb155f918f3b6b0f4ee18df88cff65_18120_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=搜索 data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>博客</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/posts/category/>Category</a><ul><li><a href=/posts/category/%E6%B5%8B%E8%AF%95/%E6%B5%8B%E8%AF%95/ title=测试1>测试1</a></li><li><a href=/posts/category/%E6%B5%8B%E8%AF%952/%E6%B5%8B%E8%AF%95%E6%96%87%E6%A1%A3/ title=测试2>测试2</a></li><li><a href=/posts/category/%E6%B5%8B%E8%AF%953/%E6%B5%8B%E8%AF%95%E6%96%87%E6%A1%A3/ title=测试3>测试3</a></li></ul></li><li><a href=/posts/markdown-sample/ title="Markdown Sample">Markdown Sample</a></li><li><a href=/posts/shortcodes/ title="Shortcodes Sample">Shortcodes Sample</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/>安装与配置文件</a><ul><li><a href=/posts/%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/hugo%E5%9C%A8github%E9%85%8D%E7%BD%AE%E7%BD%91%E9%A1%B5/hugo%E5%9C%A8github%E4%B8%8A%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5/ title=hugo在github配置静态网页>hugo在github配置静态网页</a></li><li><a href=/posts/%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6%E5%A4%B9/yige%E6%96%87%E6%A1%A3/ title=一个文档>一个文档</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/canoe/>CANoe</a><ul class=active><li><a href=/posts/canoe/canoecapl%E7%BC%96%E7%A8%8B/ title="CANoe CAPL编程">CANoe CAPL编程</a></li><li><a href=/posts/canoe/capl%E7%AC%94%E8%AE%B0/ title="Hero 测试">Hero 测试</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid post-card-holder" id=post-card-holder><div class=post-card><a href=/posts/canoe/canoecapl%E7%BC%96%E7%A8%8B/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/posts/canoe/canoecapl%E7%BC%96%E7%A8%8B/hero.svg alt="Hero Image"></div><div class=card-body><h5 class=card-title>CANoe CAPL编程</h5><p class="card-text post-summary">CANoe CAPL编程 1. CAPL概述 与Vspy的"C Code Interface"一样；在CANoe的使用中，一样提供了我们进行二次编程开发的工具——”CAPL Browser”。通过CAPL的编程，我们可以在节点上完成更为复杂的功能需求。操作如下：在CANoe工程的”Simulation Setup”界面下的左侧的网络节点中，点击铅笔形状的图标，进入CAPL编辑界面（若当前节点还没有创建对应的CAPL程序，则此时会先提示输入CAPL程序名，并保存为.can后缀的文件）
1.1 CAPL语言特性 CAPL（Communication Access Programming Laguage）语言是类C语言，语法其实与C语言很相似，但同时又包含了一些C++的特性，如this指针、事件等； 应用于Vector CAN工具节点的编程，是基于事件建模的语言； 可以使用write()函数进行调试，用于将调试信息输出到CANoe的write窗口上； 通过output()函数进行指定报文的发送； 通常是通过环境变量事件与CANoe面板进行关联，实现交互； 提供调用dll文件的方法（操作见"关于CAPL中对dll的调用操作"一文）；这样保证了对由其他语言封装好的程序模块的调用； 1.2 CAPL的程序结构 如下，一个完整的CAPL程序的结构包含了头文件、全局变量、事件函数、自定义函数；当然不是每个因素都要有，视具体程序功能确定。
1.3 CAPL的数据类型 1.4 CAPL事件类型概述 CAPL是基于事件建模的语言，从1.2小节对CAPL的程序结构的介绍也可以看出，关于CAPL的运用主要就是在于熟悉其事件的使用；其常用的事件如下：
事件过程语法结构中 蓝色字体表示该程序的关键字，深红色字体表示用户自定义的名称。
{&mldr;}内是CAPL程序体，用户可根据需要使用CAPL语言编写。
2. CAPL事件类型 2.1 系统事件 在CAPL的系统事件中，有preStart、start、preStop、stopMeasurement这4种。我们可以根据需要在相应的系统事件函数接口中定义想要进行的操作；当工程运行时，下述系统事件的发生顺序依次是
preStart-->start-->preStop-->stopMeasurement 关于系统事件的定义格式如下：
on preStart /*系统事件，初始化时执行*/ { resetCan(); /*CAPL接口函数，用于复位CAN控制器*/ } on start /*系统事件，工程开始时执行*/ { write(“Just A Try”); /*write()函数将字符串信息在”write”窗口输出*/ } on preStop /*系统事件，工程预备停止时执行;发生stopMeasurement事件前面*/ { write("The Project Will Stop!”); } on stopMeasurement /*系统事件，工程停止时执行*/ { write("The End!\n"); } 2.</p></div><div class=card-footer><span class=float-left>June 8, 2020</span>
<a href=/posts/canoe/canoecapl%E7%BC%96%E7%A8%8B/ class="float-right btn btn-outline-info btn-sm">阅读</a></div></div></a></div><div class=post-card><a href=/posts/canoe/capl%E7%AC%94%E8%AE%B0/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/posts/canoe/capl%E7%AC%94%E8%AE%B0/hero.svg alt="Hero Image"></div><div class=card-body><h5 class=card-title>hero 测试</h5><p class="card-text post-summary">This is a sample post intended to test the followings:
Default hero image. Different shortcodes. Alert The following alerts are available in this theme.
This is sample alert with type="success". This is sample alert with type="danger". This is sample alert with type="warning". This is sample alert with type="info". This is sample alert with type="dark". This is sample alert with type="primary". This is sample alert with type="secondary". Image A sample image without any attribute.</p></div><div class=card-footer><span class=float-left>June 8, 2020</span>
<a href=/posts/canoe/capl%E7%AC%94%E8%AE%B0/ class="float-right btn btn-outline-info btn-sm">阅读</a></div></div></a></div></div><div class=paginator></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>导航</h5><ul><li class=nav-item><a class=smooth-scroll href=https://GaoSHF.github.io#about>简介</a></li><li class=nav-item><a class=smooth-scroll href=https://GaoSHF.github.io#skills>技能</a></li><li class=nav-item><a class=smooth-scroll href=https://GaoSHF.github.io#accomplishments>成果</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>联系方式:</h5><ul><li><a href=mailto:gaoshf@foxmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>gaoshf@foxmail.com</span></a></li><li><span><i class="fas fa-phone-alt"></i></span> <span>+0123456789</span></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>免责声明:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2022 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=/js/list.js></script></body></html>